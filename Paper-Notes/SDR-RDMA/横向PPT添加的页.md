
### 1. 新增架构设计：软件定义可靠性（SDR）层

在标准的RDMA传输层之上，引入一个轻量级的中间件层。通过**接收端位图（Bitmap）**机制，将传统的“全消息确认”解耦为“分块局部确认” 。

- **分块传输机制**：将大消息拆分为多个与MTU对齐的切片（Chunks），推荐粒度为 **64 KiB**。每个位图中的1位代表一个Chunk的接收状态 。
- **硬件卸载加速**：利用高性能网卡的专用数据路径加速器（DPA）来处理包序列号检查和位图更新，确保在100Gbps+线速下不增加CPU负担 。

**【插图建议 1：SDR 分层架构图】**
- **左侧**：展示传统 RDMA 协议栈（App -> Verbs -> HW）。
- **右侧**：展示 SDR 架构，在 Verbs 与 HW 之间插入“SDR Layer”，突出“Bitmap Chunking”模块。
- **标注**：箭头指向网卡硬件，标注“DPA Offloading”，体现零拷贝与低 CPU 占用的特性。

可以直接沿用我给你这张图的层级结构，清晰地展示了 SDR 如何插入到标准 RDMA 栈中。

### 2. 可靠性增强：采取SR与EC的协同机制

根据广域网的实时链路状态（丢包率 $P_{drop}$ 和时延 RTT），动态切换最优的恢复策略 。

A. 选择性重传 (Selective Repeat)

- **触发场景**：适用于链路质量优良（ $P_{drop} < 10^{-6}$）或短距离传输时 。
- **工作原理**：发送端根据接收端反馈的位图，精确定位并重传丢失的Chunk。
- **性能扩充**：引入**快速负向确认（NACK）**，在广域网长延迟环境下，传统RDMA依靠 RTO（重传超时，通常 $\ge 200\text{ ms}$）恢复；通过NACK，系统在发现空洞后立即触发重传，将恢复时间 缩短至约 **1个 RTT**，极大平滑了时延抖动。

B. 纠删码前向纠错 (Erasure Coding)

- **触发场景**：适用于长距高延迟（RTT > 50ms）及高丢包率（$10^{-5} \le P_{drop} \le 10^{-2}$）环境。
- **工作原理**：发送端在发送原始数据块（k个）的同时，发送计算好的冗余校验块（m个） 。
- **优势**：在 **0.1%** 丢包率下，传统方案因频繁触发重传导致带宽利用率不足 **10%**；而开启EC后，接收端可直接在本地修复丢失包，带宽利用率可稳定在 **75%** 以上（接近 $k/(k+m)$ 的理论极限）。

### 3. 拥塞控制与可靠性机制交互
拥塞控制与可靠性协同，解决跨域互联的“算力孤岛”问题。

1. **多源信号融合速率控制** ：
    - **网侧信号**：交换机监测到端口缓存超过预设阈值（如 **500KB**）时，立即发送 **FastCNP** 信号。
    - **端侧信号**：可靠性层感知到接收位图增长缓慢或不连续（预判 Incast），主动生成 **Credit（信用）信令**，将发送速率控制在瓶颈带宽的 **95%** 左右，避免缓冲区溢出引起的剧烈丢包。

2. **自适应策略切换** ：
    - **常规状态**：$P_{drop}$ 极低，仅开启 SR。
    - **极端恶劣状态**：感知到持续丢包或延迟波动，自动开启 EC。在 **100ms RTT / 0.1% 丢包** 的极端条件下，相比传统 Go-Back-N 机制，该方案可提升整体有效吞吐量 **5-10倍**。
    
**【插图建议 3：端网协同流程图】**

- 展示发送端、交换机、接收端的三方交互。
- 标注“FastCNP”从交换机直达发送端，“Credit”从接收端反馈。
- 右侧加一个“策略决策大脑”，输入 $RTT$ 和 $P_{drop}$，输出“SR 模式”或“EC 模式”的切换开关。



---
这是为您优化后的表格，加入了**“本项目技术的效果”**作为第四列，重点展示了本项目如何通过软硬协同（SDR+DPA）来统合SR与EC的优势，并解决其固有劣势。

### **广域RDMA可靠性保障：SR与EC自适应协同机制**

系统通过实时监测广域链路状态（丢包率 $P_{drop}$ 与 往返时延 $RTT$），在**SR（低开销）**与**EC（高鲁棒）**两种模式间自动无缝切换，解决长尾延迟与吞吐崩塌问题。

| **维度 / 机制** | **A. 选择性重传 (Selective Repeat, SR)**                       | **B. 纠删码前向纠错 (Erasure Coding, EC)**                                 | **本项目技术的效果 (SDR-RDMA)**                                                               |
| ----------- | --------------------------------------------------------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------------------- |
| **基本概念**    | 基于位图反馈，仅重传丢失的数据切片 。                                       | 对数据进行 $(k, m)$ 编码，利用冗余块通过计算恢复数据 。                                   | **软硬协同架构**：引入**SDR中间件**与**DPA硬件卸载**，通过“位图分块（Bitmap Chunking）”技术，统一支持 SR 与 EC 的零拷贝实现 。 |
| **适用场景**    | **短距离 / 优良链路**<br>($P_{drop} < 10^{-6}$ 或 $RTT < 10ms$) 。 | **长距离 / 恶劣链路**<br>($RTT > 50ms$ 且 $10^{-5} < P_{drop} < 10^{-2}$) 。 | **自适应无缝切换**：实时感知链路 $P_{drop}$ 与 $RTT$，动态选择最优策略，兼顾低延迟与高吞吐 。                            |
| **核心优势**    | **极速修复**：结合**快速负向确认（NACK）**，发现空洞立即重传，恢复时间缩短至 ~1个 $RTT$ 。  | **零重传通信**：利用冗余块在**本地修复**丢失包，彻底消除跨广域网的重传等待 。                         | **消除长尾延迟**：根治“算力孤岛”问题，在复杂广域网环境下保持吞吐量平稳，避免性能抖动 。                                       |
| **潜在劣势与解决** | **劣势**：高丢包下延迟指数级累积，导致吞吐崩塌。                                | **劣势**：消耗额外 CPU 算力进行编解码，且有约 20% 带宽冗余。                               | **DPA 硬件加速**：利用网卡 DPA 单元进行卸载，将 **CPU 开销降至 <5%**，确保 SR/EC 切换不影响主机性能 。                  |
| **性能收益**    | 低丢包环境下实现**零带宽额外开销**。                                      | **0.1%** 丢包率下，带宽利用率从 <10% 提升至 **75%+** 。                            | **5-10倍 吞吐提升**：支持 **100Gbps+ 线速**处理，相比传统方案实现数倍的有效吞吐量增长 。                              |

---

### **核心逻辑解读（用于汇报）：**

1. **取长补短**：SR 就像“面对面沟通”，高效但怕干扰；EC 就像“发电报”，冗余抗噪但成本高。本项目通过**自适应算法**，让系统自动选择“最划算”的模式。
    
2. **降本增效**：EC 最大的痛点是**费 CPU**。本项目利用**智能网卡（DPA）**把这个计算任务“卸载”了，既拿到了 EC 的高可靠性，又没占用宝贵的 CPU 算力（效果列第四行）。